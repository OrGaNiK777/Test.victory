<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Автосалон</title>
		<link rel="stylesheet" href="./index.css" />
	</head>
	<body>
		<div class="page">
			<header class="header">
				<div class="header__contact">
					<img class="header__contact-icon" src="./images/marker-pin-01.svg" />
					<p class="header__contact-text">Новосибирск, ул. Дунаевского, 25/1</p>
					<img class="header__contact-icon" src="./images/clock.svg" />
					<p class="header__contact-text">Ежедневно с 9:00 до 20:00</p>
				</div>
				<div class="header__main">
					<a><img class="header__main-logo" src="./images/Logo.svg" alt="Лого header" /></a>
					<menu class="header__links">
						<a class="header__link">Главная</a>
						<a class="header__link">Каталог</a>
						<a class="header__link">Автокредит</a>
						<a class="header__link">Traid-in</a>
						<a class="header__link">Выкуп</a>
						<a class="header__link">Акции</a>
						<a class="header__link">Контакты</a>
					</menu>
					<form>
						<input class="header__search" placeholder="Поиск по марке" />
						<button class="header__btnContact">Связаться</button>
					</form>
				</div>
			</header>
			<main>
				<section class="way">Главная > Каталог > Haval > Jolion</section>
				<section class="specifications">
					<div class="specifications__header">
						<h1 class="header__title">Haval Jolion</h1>
						<h2 class="header__location">В Новосибирске</h2>
						<p class="header__availability">4 автомобиля в наличии</p>
					</div>
					<div class="specifications__main">
						<div class="main__visual">
							<span class="visual__discount">-30%</span>
							<img class="visual__img" src="./images/black.jpg" alt="car color" />
							<div class="visual__color">
								<p class="visual__text">Цвет</p>
								<p class="visual__editText">Благородный агат</p>
							</div>
						</div>
						<div class="main__buttonColors">
							<button class="main__buttonColor">1</button>
							<button class="main__buttonColor">2</button>
							<button class="main__buttonColor">3</button>
							<button class="main__buttonColor">4</button>
							<button class="main__buttonColorr">5</button>
						</div>
						<div class="main__info">
							<div class="info__parameters">
								<div class="parameter">
									<img class="parameter__icon" src="./images/lightning-01.svg" />
									<p class="parameter__title">Мощность</p>
									<p class="parameter__text">249 Л.С.</p>
								</div>
								<div class="parameter">
									<img class="parameter__icon" src="./images/speedometer-03.svg" />
									<p class="parameter__title">Объем двигателя</p>
									<p class="parameter__text">2,0 Л</p>
								</div>
								<div class="parameter">
									<img class="parameter__icon" src="./images/droplets-02.svg" />
									<p class="parameter__title">Расход</p>
									<p class="parameter__text">2,0 Л</p>
								</div>
								<div class="parameter">
									<img class="parameter__icon" src="./images/Drive unit.svg" />
									<p class="parameter__title">Привод</p>
									<p class="parameter__text">Полный</p>
								</div>
							</div>
							<div class="benefit">
								<ul class="benefit__offers">
									<li class="benefit__offer">
										<div class="checkbox">
											<input type="checkbox" />
											<span class="slider round"></span>
										</div>
										<p class="benefit__title">Скидка по Traid-in</p>
										<p id="traidIn" class="benefit__sum">- 170 000 ₽</p>
									</li>
									<li class="benefit__offer">
										<div class="checkbox">
											<input type="checkbox" />
											<span class="slider round"></span>
										</div>
										<p class="benefit__title">Покупка в кредит</p>
										<p id="bonus" class="benefit__sum">- 250 000 ₽</p>
									</li>
									<li class="benefit__offer">
										<div class="checkbox">
											<input type="checkbox" />
											<span class="slider round"></span>
										</div>
										<p class="benefit__title">Скидка по программе утилизации</p>
										<p id="util" class="benefit__sum">- 80 000 ₽</p>
									</li>
									<li class="benefit__offer">
										<p class="benefit__title">Ваша выгода</p>
										<p id="AllBenefit" class="benefit__sum">330 000 ₽</p>
									</li>
								</ul>
							</div>
							<div class="final">
								<div class="final__price">
									от
									<p id="finalPrice">7 070 000 ₽</p>
									<p class="price__credit">В кредит от 89 000 ₽/мес</p>
								</div>
								<p class="benefit__sum">Цена без учета скидки: от 7 400 000 ₽</p>
								<div class="final__buttons">
									<button class="final__button final__button--booking">Забронировать</button>
									<button class="final__button final__button--buy">Купить в кредит</button>
								</div>
							</div>
						</div>
					</div>
				</section>
				<section class="calc">
					<h2 class="calc__title">Рассчитайте условия по кредиту на Haval Jolion</h2>
					<div class="calc__main">
						<div class="calc__credit">
							<h2 class="credit__title">Сумма кредита</h2>
							<p id="finalPriceCalc" class="credit__sumCred">7 070 000 ₽</p>
							<div class="inputRange">
								<p class="inputRange__title">Первоначальный взнос</p>
								<p id="firstInstallmentText" class="inputRange__value"></p>
								<input class="inputRange__input styled-slider slider-progress" id="firstInstallmentRange" type="range" oninput="updateTextFirstInst()" min="0" max="90" step="0.1" value="56,57708628005658" />
								<div class="inputRange__range">
									<p>0%</p>
									<p>90%</p>
								</div>
							</div>
							<div class="inputRange">
								<p class="inputRange__title">Срок кредита</p>
								<p id="termText" class="inputRange__value">6 мес.</p>
								<input class="inputRange__input styled-slider slider-progress" id="termRange" type="range" oninput="updateTextTerm()" min="6" max="96" step="6" value="6" />
								<div class="inputRange__range">
									<p>6 мес.</p>
									<p>8 лет</p>
								</div>
							</div>
						</div>
						<div class="calc__offer">
							<h2 class="offer__title">Наше предложение</h2>
							<div class="offer__payment">
								<h3 class="payment__title">Ежемесячный платеж</h3>
								<div class="payment__sum">
									<button onclick="decrement()" class="payment__button payment__button--minus">-</button>
									<p class="payment__calc">30 000 Р</p>
									<button onclick="increment()" class="payment__button payment__button--plus">+</button>
								</div>
								<div class="payment__disclaimer">
									<img class="payment__disclaimer-img" src="./images/Icon.svg" alt="!" />
									<p class="payment__disclaimer-text">Расчет носит инфомационный характер, не является публичной офертой</p>
								</div>
								<button class="payment__buttonBuy">Купить в кредит</button>
							</div>
						</div>
					</div>
				</section>
				<section class="comparison">
					<h2 class="comparison__title">Сравнение комплектаций Haval Jolion <span class="comparison___quantity">(12)</span></h2>
					<div class="comparison__buttons">
						<button class="comparison__button" id="prevBtn">←</button>
						<button class="comparison__button" id="nextBtn">→</button>
					</div>
					<div class="comparison__container" style="display: flex"></div>
					<div class="comparison__options">
						<h3 class="options__title">Безопасность</h3>
						<h4 class="options__subtitle">Крепления для детского кресла ISOFIX</h4>
						<h4 class="options__subtitle">Крепления для детского кресла ISOFIX</h4>
						<h4 class="options__subtitle">Система предупреждения бокового столкновения при выезде с парковки задним ходом (RCCW)</h4>
						<h4 class="options__subtitle">Крепления для детского кресла ISOFIX</h4>
						<h4 class="options__subtitle">Запасное колесо временного использования</h4>
						<h4 class="options__subtitle">Иммобилайзер</h4>
						<h4 class="options__subtitle">Крепления для детского кресла ISOFIX</h4>
					</div>
				</section>
			</main>
			<template id="cardTemplate">
				<div class="card">
					<div class="card__container">
						<h2 class="card__title"></h2>
						<p class="card__price"></p>
						<button class="card__btnClose">X</button>
						<button class="card__btnSub">Отправить заявку</button>
					</div>
					<div class="card__options" style="display: flex; flex-direction: column; width: 50px">
						<img class="card__option option1" src="" alt="" />
						<img class="card__option option2" src="" alt="" />
						<img class="card__option option3" src="" alt="" />
						<img class="card__option option4" src="" alt="" />
						<img class="card__option option5" src="" alt="" />
						<img class="card__option option6" src="" alt="" />
						<img class="card__option option7" src="" alt="" />
					</div>
				</div>
			</template>
		</div>
	</body>
	<script src="./index.js" type="module"></script>
	<script>
		function clear(num) {
			return Number(num ? num.replace(/\D/g, '') : 0)
		}

		function updateTextPayment() {
			const price = clear(document.getElementById('finalPriceCalc').textContent)
			const firstInstallmentText = clear(document.getElementById('firstInstallmentText').textContent)
			const termText = clear(document.getElementById('termRange').value)
			const paymentCalc = document.querySelector('.payment__calc')
			paymentCalc.textContent =
				Math.round((price - firstInstallmentText) / termText)
					.toString()
					.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ₽'
		}

		function updateTextTerm() {
			const rangeValue = document.getElementById('termRange').value
			const textValue = document.getElementById('termText')
			textValue.textContent = rangeValue < 12 ? rangeValue + ' мес.' : rangeValue < 18 ? rangeValue / 12 + ' год' : rangeValue < 60 ? rangeValue / 12 + ' года' : rangeValue / 12 + ' лет'
			updateTextPayment()
		}

		function updateTextFirstInst() {
			const price = document.getElementById('finalPriceCalc').textContent
			const rangeValue = document.getElementById('firstInstallmentRange').value
			const textValue = document.getElementById('firstInstallmentText')
			textValue.textContent =
				Math.round((clear(price) * rangeValue) / 100)
					.toString()
					.replace(/\B(?=(\d{3})+(?!\d))/g, ' ') + ' ₽'
			updateTextPayment()
		}
		updateTextFirstInst()

		function increment() {
			const rangeInput = document.getElementById('termRange')
			if (parseInt(rangeInput.value) < 96) {
				rangeInput.value = parseInt(rangeInput.value) + 6
				updateTextTerm()
			}
		}

		function decrement() {
			const rangeInput = document.getElementById('termRange')
			if (parseInt(rangeInput.value) > 6) {
				rangeInput.value = parseInt(rangeInput.value) - 6
				updateTextTerm()
			}
		}
	</script>
</html>
